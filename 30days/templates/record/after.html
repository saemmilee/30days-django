<!DOCTYPE html>
 {% load static %}
<html lang="ko">
<head>
    <!--meta-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--css-->
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
    <!--chart.js-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <title>after</title>
</head>
<body>

<div id="after">

    <h2>ğŸ‘‰ {{ user.username }}ë‹˜ì˜ ì‘ì‹¬ì‚¼ì‹­ì¼ ì´ìš© ê²°ê³¼ ğŸ‘ˆ</h2>

    <!--ê²°ê³¼ ìƒì„¸íˆ-->
    <div id="after_detail">
        <h4>30ì¼ ì¤‘ {{ diary_list|length }}ì¼ì˜ ê¸°ë¡ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</h4>
        <h4>ë‹¹ì‹ ì€ í•˜ë£¨ í‰ê·  {{ calAvg|floatformat }}ì¹¼ë¡œë¦¬ë¥¼ ì„­ì·¨í•˜ê³  {{ timeAvg|floatformat }}ë¶„ì„ ìš´ë™í•˜ì…¨ìŠµë‹ˆë‹¤.</h4>
        <h4></h4>
    </div>

    <!--ì°¨íŠ¸-->
    <canvas id="myChart" width="800" height="250"></canvas>

    <!-- 30ì¼ ë™ì•ˆì˜ ê¸°ë¡ -->
    <table>

        <thead>
        <tr>
            <th>ë²ˆí˜¸</th>
            <th>ë‚ ì§œ</th>
            <th>ì„­ì·¨í•œ ì¹¼ë¡œë¦¬</th>
            <th>ìš´ë™ì¢…ë¥˜</th>
            <th>ìš´ë™ì‹œê°„</th>
            <th>comment</th>
        </tr>
        </thead>

        <tbody>
        {% if diary_list %}
        {% for diary in diary_list %}
        <tr>
            <td>{{forloop.counter}}</td>
            <td>{{diary.create_date | date:'Yë…„ mì›” dì¼'}}</td>
            <td>{{diary.calorie|floatformat}}</td>
            <td>{{diary.exercise}}</td>
            <td>{{diary.exerciseTime|floatformat}}</td>
            <td>{{diary.comment}}</td>
        </tr>
        {% endfor %}
        {% else %}
        <p>30ì¼ ë™ì•ˆ í•œë²ˆë„ ê¸°ë¡í•˜ì§€ ì•Šìœ¼ì…¨ìŠµë‹ˆë‹¤.</p>
        {% endif %}
        </tbody>

    </table>

</div>

<script>

    // ì›ë˜ ì‘ë™í•˜ëŠ” ì°¨íŠ¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ start
	var ctx = document.getElementById('myChart');
	var myChart = new Chart(ctx, {
		type: 'line',
		data: {
			labels: [{% for diary in diary_list %}'{{diary.create_date | date:'mì›” dì¼' }}',{% endfor %}],
			datasets: [{
				label: 'ì„­ì·¨í•œ ì¹¼ë¡œë¦¬',
				data: [{% for diary in diary_list %}'{{diary.calorie}}',{% endfor %}],
				borderColor: 'rgb(75, 192, 192)',
				borderWidth: 2
			}]
		},
		options: {
			responsive: false,
			scales: {
				yAxes: [{
					ticks: {
						beginAtZero: false
					}
				}]
			},

		}
	});
	//ì›ë˜ ì‘ë™í•˜ë˜ ì°¨íŠ¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ end
</script>


</body>
</html>